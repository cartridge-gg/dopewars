fragment PlayerProps on Player {
  name
  avatar_id
  cash
  status
  location_id
  next_location_id
  drug_count
  health
  turn
  max_turns
  max_items
  attack
  defense
  transport
  speed
  wanted
  game_over
}

query PlayerEntity($gameId: String!, $playerId: String!) {
  entities(keys: [$gameId, $playerId]) {
    totalCount
    edges {
      node {
        id
        models {
          __typename
          ... on Player {
            ...PlayerProps
          }
          ... on Drug {
            drug_id
            quantity
          }
          ... on Item {
            item_id
            level
            name
            value
          }
          ... on Encounter {
            encounter_id
            level
            health
            payout
          }
          ... on MarketPacked {
            game_id
            packed
          }
        }
      }
    }
  }
}

subscription PlayerEntitySubscription($id: ID) {
  entityUpdated(id: $id) {
    id
    keys
    models {
      __typename
      ... on Player {
        ...PlayerProps
      }
      ... on MarketPacked {
        game_id
        packed
      }
    }
  }
}

subscription PlayerEntityRelatedDataSubscription($id: ID) {
  entityUpdated(id: $id) {
    id
    keys
    models {
      __typename
      ... on Drug {
        drug_id
        quantity
      }
      ... on Item {
        item_id
        level
        name
        value
      }
      ... on Encounter {
        encounter_id
        level
        health
        payout
      }
    }
  }
}

query PlayerLogs($game_id: String!, $player_id: String!) {
  events(last: 1000, keys: ["*", $game_id, $player_id]) {
    totalCount
    edges {
      node {
        id
        keys
        data
        createdAt
      }
    }
  }
}
