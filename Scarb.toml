[package]
cairo-version = "=2.8.4"
name = "rollyourown"
version = "0.1.0"

[cairo]
# sierra-replace-ids = true

[tool.fmt]
sort-module-level-items = true
max-line-length = 100
tab-size = 4

[[target.starknet-contract]]
build-external-contracts = [ "dojo::world::world_contract::world" ]

[dependencies]
starknet = "2.8.4"
# dojo = { path = "../dojo/crates/dojo/core" }
dojo = { git = "https://github.com/dojoengine/dojo", tag = "v1.0.0-rc.1" }
cartridge_vrf = { git = "https://github.com/cartridge-gg/vrf" }

[scripts]
katana = "katana --allowed-origins \"*\" -b 2000 --disable-fee --dev"
torii = "torii --allowed-origins \"*\" --index-pending true --polling-interval 1000 --world 0x04fc1ccab8ac4ce48480a8fbb3d0628e6e52ecc63ca5a3c0dc8a2161a9b01705"

# common
copy_manifest = "./scripts/copy_manifest.sh"
gendojo = "./scripts/gen.sh"

# migrate  && scarb run gendojo $PROFILE
migrate = "PROFILE=dev && sozo -P $PROFILE build && sozo -P $PROFILE migrate -vvv && scarb run copy_manifest $PROFILE && scarb run gendojo $PROFILE && sozo -P $PROFILE inspect"
migrate_ryo1 = "PROFILE=ryo1 && sozo -P $PROFILE build && sozo -P $PROFILE migrate -vvv --slot.controller && scarb run copy_manifest $PROFILE"
migrate_internal = "PROFILE=internal && sozo -P $PROFILE build && sozo -P $PROFILE migrate -vvv --slot.controller && scarb run copy_manifest $PROFILE"
migrate_ryosepolia = "PROFILE=ryosepolia && sozo -P $PROFILE build && sozo -P $PROFILE migrate --keystore ../../../sozo_acc -vvv && scarb run copy_manifest $PROFILE"

# slot ryosepolia 
slot_ryosepolia_torii = "slot d create ryosepolia2 torii --rpc https://api.cartridge.gg/x/starknet/sepolia --index-pending true --version v1.0.0-rc.1 --world 0x04fc1ccab8ac4ce48480a8fbb3d0628e6e52ecc63ca5a3c0dc8a2161a9b01705"

# slot ryo1
# slot_ryo1_katana = "slot d create ryo1 katana -v 1.0.0-alpha.16 -b 2000 -a 10 --disable-fee true"
slot_ryo1_katana = "slot d create ryo1 katana -v v1.0.0-rc.1 -b 2000 -a 10 --disable-fee false"
slot_ryo1_torii = "slot d create ryo1 torii --rpc  https://api.cartridge.gg/x/ryo1/katana --index-pending true --version v1.0.0-rc.1 --world 0x04fc1ccab8ac4ce48480a8fbb3d0628e6e52ecc63ca5a3c0dc8a2161a9b01705"


# [[target.dojo]]
# build-external-contracts = [
#     "cartridge_vrf::vrf_provider::vrf_provider::VrfProvider",
# ]

[profile.ryo1]
[profile.ryosepolia]
[profile.mainnet]
