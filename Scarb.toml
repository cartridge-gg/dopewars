[package]
cairo-version = "=2.10.1"
name = "rollyourown"
version = "0.1.0"
# edition = "2024_07"

[cairo]
# sierra-replace-ids = true

[tool.fmt]
sort-module-level-items = true
max-line-length = 100
tab-size = 4

[[target.starknet-contract]]
build-external-contracts = [
    "dojo::world::world_contract::world",
    "achievement::events::index::e_TrophyCreation",
    "achievement::events::index::e_TrophyProgression",
    "tournaments::components::models::game::m_GameMetadata",
    "tournaments::components::models::game::m_TokenMetadata",
    "tournaments::components::models::game::m_GameCounter",
    "tournaments::components::models::game::m_Score",
    "tournaments::components::models::game::m_Settings",
    "tournaments::components::models::game::m_SettingsDetails",
    "tournaments::components::models::game::m_SettingsCounter",
]
sierra = true
casm = true

[dev-dependencies]
cairo_test = "2.10.1"

[dependencies]
starknet = "2.10.1"
dojo = { git = "https://github.com/dojoengine/dojo", tag = "v1.5.0" }
cartridge_vrf = { git = "https://github.com/cartridge-gg/vrf" }
achievement = { git = "https://github.com/cartridge-gg/arcade" }
tournaments = { git = "https://github.com/FemiOje/tournaments.git", branch = "feat/dojo-1.5.x"}
# achievement = { git = "https://github.com/cartridge-gg/bushido", rev = "0b658f495885f387bf56d6a27e76514b9b4b772f" }

# bushido_trophy = { git = "https://github.com/cartridge-gg/bushido", branch = "bump_version_rc2" }
# bushido_trophy = { git = "https://github.com/cartridge-gg/bushido" }
# dojo = { path = "../dojo/crates/dojo/core" }

openzeppelin_access = "0.18.0" 
openzeppelin_token = "0.18.0"
openzeppelin_introspection = "0.18.0"

[scripts]
katana = "katana --config ./katana_dev.toml"
katana_with_db = "katana --config ./katana_dev.toml --db-dir db"
torii = "torii --config ./torii_dev.toml"

# common
copy_manifest = "./scripts/copy_manifest.sh"
gendojo = "./scripts/gen.sh"
auth = "./scripts/auth.sh"
emit_items = "./scripts/emit_items.sh"

# migrate  && scarb run gendojo $PROFILE
migrate = "PROFILE=dev && sozo -P $PROFILE build && sozo -P $PROFILE migrate -vvv && scarb run copy_manifest $PROFILE && scarb run auth $PROFILE && scarb run gendojo $PROFILE && sozo -P $PROFILE inspect"
migrate_dopewars = "PROFILE=dopewars && sozo -P $PROFILE build && sozo -P $PROFILE migrate -vvv && scarb run copy_manifest $PROFILE && scarb run auth $PROFILE && sozo -P $PROFILE inspect"
migrate_ryosepolia_controller = "PROFILE=ryosepolia && sozo -P $PROFILE build && sozo -P $PROFILE migrate --slot.controller -vvv && scarb run copy_manifest $PROFILE && scarb run auth $PROFILE && sozo -P $PROFILE inspect"
migrate_ryosepolia = "PROFILE=ryosepolia && sozo -P $PROFILE build && sozo -P $PROFILE migrate --fee eth --fee-estimate-multiplier 2 --keystore ../../../sozo_acc -vvv && scarb run copy_manifest $PROFILE && scarb run auth $PROFILE && sozo -P $PROFILE inspect"
migrate_ryomainnet = "PROFILE=mainnet && sozo -P $PROFILE build && sozo -P $PROFILE migrate --fee eth --fee-estimate-multiplier 2 --keystore ../../../dopewars_key -vvv && scarb run copy_manifest $PROFILE && scarb run auth $PROFILE && sozo -P $PROFILE inspect"

# slot dopewars
slot_dopewars_katana = "slot d create -t insane dopewars katana -v v1.4.0 --config ./katana_dopewars.toml"
slot_dopewars_torii = "slot d create -t insane dopewars torii  -v v1.4.0 --config ./torii_dopewars.toml"

# slot ryosepolia 
slot_ryosepolia_torii = "slot d create ryosepolia2 torii -v v1.0.0-rc.2 --config-file ./torii_ryosepolia2.toml"

# slot ryomainnet
slot_ryomainnet_torii = "slot d create --tier rare ryomainnet torii -v v1.0.5 --config ./torii_mainnet.toml"

[profile.dopewars]
[profile.ryosepolia]
[profile.mainnet]

